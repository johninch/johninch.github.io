<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="eslint+husky+prettier+lint-staged"><meta name="keywords" content="代码检查,团队成长,eslint,prettier,husky"><meta name="author" content="Johninch"><meta name="copyright" content="Johninch"><title>eslint+husky+prettier+lint-staged | JohninchのBlog</title><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.3"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="manifest" href="/manifest.json"><link rel="manifest" href="/manifest.json"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"0XJEPPY0XU","apiKey":"e06877afb5799837e43083eaa72dae92","indexName":"inch-blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、团队代码约束工程化流程"><span class="toc-number">1.</span> <span class="toc-text">一、团队代码约束工程化流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、认识流程中的工具"><span class="toc-number">2.</span> <span class="toc-text">二、认识流程中的工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、具体配置"><span class="toc-number">3.</span> <span class="toc-text">二、具体配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、-注意几个关键问题！！"><span class="toc-number">4.</span> <span class="toc-text">三、 注意几个关键问题！！</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、-完整配置"><span class="toc-number">5.</span> <span class="toc-text">四、 完整配置</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://avatars3.githubusercontent.com/u/16729420?s=460&amp;v=4"></div><div class="author-info__name text-center">Johninch</div><div class="author-info__description text-center">张宇驰的博客主页</div><div class="follow-button"><a href="https://github.com/johninch">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">11</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">23</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">3</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="https://https://johninch.github.io/Roundtable/">Roundtable-io</a><a class="author-info-links__name text-center" href="https://github.com/johninch/Roundtable">Roundtable-repo</a><a class="author-info-links__name text-center" href="https://github.com/esop-fed">ESOP-FED</a><a class="author-info-links__name text-center" href="https://dannisi.github.io/">Caleb</a><a class="author-info-links__name text-center" href="https://niannings.github.io/">niannings</a><a class="author-info-links__name text-center" href="https://Xmtd.github.io/">Xmtd</a><a class="author-info-links__name text-center" href="https://febcat.github.io/">febcat</a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">JohninchのBlog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">eslint+husky+prettier+lint-staged</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-12-12</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/工程化/">工程化</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">4.3k</span><span class="post-meta__separator">|</span><span>阅读时长: 18 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><blockquote>
<p>本文主要探究，如何约束和保持 <code>前端团队代码一致性</code>, 分别介绍 eslint、prettier、husky、lint-staged、commitlint</p>
</blockquote>
<a id="more"></a>

<hr>
<h2 id="一、团队代码约束工程化流程"><a href="#一、团队代码约束工程化流程" class="headerlink" title="一、团队代码约束工程化流程"></a>一、团队代码约束工程化流程</h2><ol>
<li>待提交的代码 git add 添加到 git暂存区（staged）；</li>
<li>执行 git commit；</li>
<li>husky（哈士奇）注册在 git hook 中的 commit-msg钩子函数被调用，执行commitlint，强制校验代码提交时的commit msg；</li>
<li>husky（哈士奇）注册在 git hook 中的 pre-commit钩子函数被调用，执行lint-staged；</li>
<li>lint-staged（顾名思义是只对暂存区文件执行lint）取得所有被提交的文件依次执行写好的任务（ESLint 和 Prettier）；</li>
<li>如果有错误（没通过ESlint检查）则停止任务，同时打印错误信息，等待修复后再执行commit；</li>
<li>成功commit，可push到远程。</li>
</ol>
<h2 id="二、认识流程中的工具"><a href="#二、认识流程中的工具" class="headerlink" title="二、认识流程中的工具"></a>二、认识流程中的工具</h2><ul>
<li><p>husky（哈士奇）的作用：如果没有husky，代码就需要push到origin之后再进行lint扫描，反馈流程过长且本身未通过检查的代码是不应该push到origin仓库中的。最理想的时机应该是在本地执行 git commit 时，触发代码检查，那么就需要用到 git hook。husky 其实就是一个为 git 客户端增加 hook 的工具。将其安装到所在仓库的过程中它会自动在 .git/ 目录下增加相应的钩子实现在 pre-commit 阶段就执行一系列流程保证每一个 commit 的正确性。</p>
</li>
<li><p>git的hook 就是git add、git commit等git操作时的回调钩子（可以查看.git文件下的hooks目录，这里存放的是git相关操作的一些脚本例子）。</p>
</li>
<li><p>lint-staged 就是在 pre-commit 钩子函数中执行的工具。在进行git commit的时候触发到git hook进而执行pre-commit，而pre-commit脚本引用了lint-staged配置表，只对git add到stage区的文件进行配置表中配置的操作（此处我们不仅仅可以利用其调用linters，还可以调用prettier对代码进行格式化，注意应先格式化后lint检查）；</p>
</li>
</ul>
<ul>
<li><p>为什么只对stage区的文件检查？如果是项目中途引入代码检查，那么在有历史代码时，对其他未修改文件都进行检查，一下出现成百上千个错误，那么可能会造成冲突或者一些不可预知的问题，降低项目稳定性；</p>
</li>
<li><p>具体lint-staged做了三件事情：</p>
<ol>
<li>执行prettier脚本，这是对代码进行格式化的，在下面具体来说；</li>
<li>执行eslint –fix操作，进行扫描，若发现工具可修复的问题进行fix；</li>
<li>上述两项任务完成后对代码重新add。</li>
</ol>
</li>
</ul>
<p>prettier是格式化代码工具：可是eslint已经有格式化功能了，为什么还需要prettier？Prettier 确实和 ESLint 有重叠，但两者侧重点不同：</p>
<ul>
<li>ESLint 主要工作就是检查代码质量和检查代码风格，并给出提示，虽然 eslint –fix 来修复一些问题（eslint规则中前面带🔧图标的都是可以自动修复的），但它所能提供的格式化功能很有限；</li>
<li>而 Prettier 没有对代码的质量进行检查的能力，其只会对代码风格按照指定的规范进行统一，避免一个项目中出现多种不同的代码风格。Prettier 被设计为易于与 ESLint 集成，所以你可以轻松在项目中使两者，而无需担心冲突。</li>
</ul>
<ul>
<li>commitlint的作用：使用commitLint强制校验代码提交时的commit msg格式，约束团队git提交规范，方便历史回顾、帮助他人更好review、查找、追踪代码变动历史等。也需要使用huksy，将commitlint的检查绑定到commit-msg这个hook上。<ul>
<li><code>&lt;type&gt;[optional scope]: &lt;description&gt;</code>: type如下<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">build: 项目构建打包</span><br><span class="line">ci: 项目构建配置的变动</span><br><span class="line">docs: 仅仅修改了文档等（不是指文案类的改动，而是指项目文档、代码注释等）</span><br><span class="line">fix: 修复bug</span><br><span class="line">feat: 增加新功能</span><br><span class="line">perf: 优化</span><br><span class="line">refactor: 重构(非fix、非feature、非style风格格式化)</span><br><span class="line">revert: 代码回滚</span><br><span class="line">style: 代码风格变动，例如空格、缩进等（不是指css文件变动）</span><br><span class="line">test: 测试用例代码</span><br><span class="line">chore: 其他类型的更改（非即以上类型的改动）</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="二、具体配置"><a href="#二、具体配置" class="headerlink" title="二、具体配置"></a>二、具体配置</h2><ol>
<li><p>配置eslint</p>
<p>eslint配置文件可以有多种形式（传送门：<a href>eslint官网</a>）：<br> ESLint 配置文件优先级：</p>
<ul>
<li>.eslintrc.js(输出一个配置对象)</li>
<li>.eslintrc.yaml</li>
<li>.eslintrc.yml</li>
<li>.eslintrc.json（ESLint的JSON文件允许JavaScript风格的注释）</li>
<li>.eslintrc（可以是JSON也可以是YAML）</li>
<li>package.json（在package.json里创建一个eslintConfig属性，在那里定义你的配置）</li>
</ul>
<p>这里我们采用在项目根目录下配置.eslintrc.js及.eslintignore文件。</p>
<ul>
<li>在项目根目录创建一个.eslintignore文件，告诉ESLint去忽略特定的文件和目录</li>
<li>.eslintignore文件是一个纯文本文件，其中的每一行都是一个glob模式表明哪些路径应该忽略检测<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/build/</span><br><span class="line">/config/</span><br><span class="line">/dist/</span><br><span class="line">/*.js</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>.eslintrc.js配置文件：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// https://eslint.org/docs/user-guide/configuring</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  root: <span class="literal">true</span>, <span class="comment">// 与寻找配置文件规则有关</span></span><br><span class="line">  <span class="comment">// ESLint默认使用Espree作为其解析器, 同时babel-eslint也是用得最多的解析器</span></span><br><span class="line">  parser: <span class="string">'vue-eslint-parser'</span>, <span class="comment">// 详见https://eslint.vuejs.org/user-guide/#faq</span></span><br><span class="line">  parserOptions: &#123; <span class="comment">// TODparser解析代码时的参数</span></span><br><span class="line">    parser: <span class="string">'babel-eslint'</span>,</span><br><span class="line">    sourceType: <span class="string">'module'</span>, <span class="comment">// //设置为script(默认)或module（如果你的代码是ECMAScript模块)</span></span><br><span class="line">    <span class="comment">// 指定要使用的ECMAScript版本，默认值5</span></span><br><span class="line">    <span class="comment">// ecmaVersion: 5,</span></span><br><span class="line">    <span class="comment">// 这是个对象，表示你想使用的额外的语言特性,所有选项默认都是false</span></span><br><span class="line">    ecmaFeatures: &#123;</span><br><span class="line">      <span class="comment">// 允许在全局作用域下使用return语句</span></span><br><span class="line">      <span class="comment">// globalReturn: false,</span></span><br><span class="line">      <span class="comment">// 启用全局strict模式（严格模式）</span></span><br><span class="line">      <span class="comment">// impliedStrict: false,</span></span><br><span class="line">      <span class="comment">// 启用JSX</span></span><br><span class="line">      jsx: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// 启用对实验性的objectRest/spreadProperties的支持</span></span><br><span class="line">      <span class="comment">// experimentalObjectRestSpread: false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// globals: &#123;</span></span><br><span class="line">  <span class="comment">//     __: true // 配置自定义全局变量</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="comment">// 指定环境，每个环境都有自己预定义的全局变量，可以同时指定多个环境，不矛盾</span></span><br><span class="line">  env: &#123;</span><br><span class="line">    <span class="comment">//效果同配置项ecmaVersion一样</span></span><br><span class="line">    es6: <span class="literal">true</span>,</span><br><span class="line">    browser: <span class="literal">true</span>,</span><br><span class="line">    node: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// commonjs: false,</span></span><br><span class="line">    <span class="comment">// mocha: true,</span></span><br><span class="line">    <span class="comment">// jquery: true,</span></span><br><span class="line">    <span class="comment">//如果你想使用来自某个插件的环境时，确保在plugins数组里指定插件名</span></span><br><span class="line">    <span class="comment">//格式为：插件名/环境名称（插件名不带前缀）</span></span><br><span class="line">    <span class="comment">// react/node: true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ESLint支持使用第三方插件</span></span><br><span class="line">  <span class="comment">// 在使用插件之前，你必须使用npm安装它</span></span><br><span class="line">  <span class="comment">// 全局安装的ESLint只能使用全局安装的插件</span></span><br><span class="line">  <span class="comment">// 本地安装的ESLint不仅可以使用本地安装的插件还可以使用全局安装的插件</span></span><br><span class="line">  <span class="comment">// plugin与extend的区别：extend提供的是eslint现有规则的一系列预设</span></span><br><span class="line">  <span class="comment">// 而plugin则提供了除预设之外的自定义规则，当你在eslint的规则里找不到合适的的时候</span></span><br><span class="line">  <span class="comment">// 就可以借用插件来实现了</span></span><br><span class="line">  extends: [ <span class="comment">// extends属性值可以是一个字符串或字符串数组，数组中每个配置项继承它前面的配置</span></span><br><span class="line">    <span class="string">'plugin:vue/recommended'</span>,</span><br><span class="line">    <span class="string">'eslint:recommended'</span>,</span><br><span class="line">    <span class="string">'plugin:prettier/recommended'</span>,</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// 插件名称可以省略eslint-plugin-前缀</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="string">'vue'</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// off或0--关闭规则</span></span><br><span class="line">  <span class="comment">// warn或1--开启规则，警告级别(不会导致程序退出)</span></span><br><span class="line">  <span class="comment">// error或2--开启规则，错误级别(当被触发的时候，程序会退出)</span></span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="comment">// 这里如果配置了具体规则，会覆盖.prettierrc文件中的规则</span></span><br><span class="line">    <span class="comment">// 且单独执行prettier --write命令，这里的配置是读不到的</span></span><br><span class="line">    <span class="string">"prettier/prettier"</span>: [<span class="string">"error"</span>, &#123;</span><br><span class="line">      <span class="string">"singleQuote"</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">"trailingComma"</span>: <span class="string">"none"</span>,</span><br><span class="line">      <span class="string">"bracketSpacing"</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">"jsxBracketSameLine"</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">"endOfLine"</span>: <span class="string">"crlf"</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="comment">// https://eslint.vuejs.org/rules/</span></span><br><span class="line">    <span class="comment">// https://eslint.vuejs.org/rules/max-attributes-per-line.html</span></span><br><span class="line">    <span class="string">'vue/max-attributes-per-line'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'singleline'</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="string">'multiline'</span>: &#123;</span><br><span class="line">        <span class="string">'max'</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">'allowFirstLine'</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="comment">// https://eslint.vuejs.org/rules/singleline-html-element-content-newline.html</span></span><br><span class="line">    <span class="string">'vue/singleline-html-element-content-newline'</span>: <span class="string">'off'</span>,</span><br><span class="line">    <span class="string">'vue/multiline-html-element-content-newline'</span>:<span class="string">'off'</span>,</span><br><span class="line">    <span class="comment">// https://eslint.vuejs.org/rules/name-property-casing.html</span></span><br><span class="line">    <span class="string">'vue/name-property-casing'</span>: [<span class="string">'error'</span>, <span class="string">'PascalCase'</span>],</span><br><span class="line">    <span class="string">'vue/no-v-html'</span>: <span class="string">'off'</span>,</span><br><span class="line">    <span class="string">'vue/html-self-closing'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="comment">// 如果某条规则有额外的选项，你可以使用数组字面量指定它们</span></span><br><span class="line">    <span class="string">"vue/order-in-components"</span>: [<span class="string">"error"</span>, &#123;</span><br><span class="line">      <span class="string">"order"</span>: [</span><br><span class="line">        <span class="string">"el"</span>,</span><br><span class="line">        <span class="string">"name"</span>,</span><br><span class="line">        <span class="string">"parent"</span>,</span><br><span class="line">        <span class="string">"functional"</span>,</span><br><span class="line">        [<span class="string">"delimiters"</span>, <span class="string">"comments"</span>],</span><br><span class="line">        <span class="string">"extends"</span>,</span><br><span class="line">        <span class="string">"mixins"</span>,</span><br><span class="line">        <span class="string">"inheritAttrs"</span>,</span><br><span class="line">        <span class="string">"model"</span>,</span><br><span class="line">        [<span class="string">"props"</span>, <span class="string">"propsData"</span>],</span><br><span class="line">        <span class="string">"fetch"</span>,</span><br><span class="line">        <span class="string">"asyncData"</span>,</span><br><span class="line">        <span class="string">"data"</span>,</span><br><span class="line">        <span class="string">"computed"</span>,</span><br><span class="line">        <span class="string">"watch"</span>,</span><br><span class="line">        [<span class="string">"directives"</span>, <span class="string">"filters"</span>],</span><br><span class="line">        <span class="string">"LIFECYCLE_HOOKS"</span>,</span><br><span class="line">        <span class="string">"methods"</span>,</span><br><span class="line">        <span class="string">"head"</span>,</span><br><span class="line">        [<span class="string">"template"</span>, <span class="string">"render"</span>],</span><br><span class="line">        <span class="string">"renderError"</span>,</span><br><span class="line">        <span class="string">"components"</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="comment">// https://eslint.org/docs/rules/</span></span><br><span class="line">    <span class="string">'accessor-pairs'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'arrow-spacing'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'before'</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">'after'</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'block-spacing'</span>: [<span class="number">2</span>, <span class="string">'always'</span>],</span><br><span class="line">    <span class="string">'brace-style'</span>: [<span class="number">2</span>, <span class="string">'1tbs'</span>, &#123;</span><br><span class="line">      <span class="string">'allowSingleLine'</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'camelcase'</span>: [<span class="number">0</span>, &#123;</span><br><span class="line">      <span class="string">'properties'</span>: <span class="string">'always'</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'comma-dangle'</span>: [<span class="number">2</span>, <span class="string">'never'</span>],</span><br><span class="line">    <span class="string">'comma-spacing'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'before'</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">'after'</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="comment">// ......</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果希望在重新编译的时候eslint自动修复代码，需要在webpack配置中加入eslint，并且设置 fix: true ，并且在devserver中开启eslint（<a href="https://my.oschina.net/u/3970421/blog/2874449" target="_blank" rel="noopener">传送门</a>，本方案未采用）。</p>
</li>
<li><p>配置prettier</p>
<p>与eslint的配置方式相似，prettier也可以有多重配置文件，本文也只采用在根目录下配置.prettierrc.js。</p>
<p>.prettierrc.js配置文件： </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123; </span><br><span class="line"><span class="string">"printWidth"</span>: <span class="number">80</span>, <span class="comment">// 每行代码长度（默认80）</span></span><br><span class="line"><span class="string">"tabWidth"</span>: <span class="number">2</span>, <span class="comment">// 每个tab相当于多少个空格（默认2）</span></span><br><span class="line"><span class="string">"useTabs"</span>: <span class="literal">false</span>, <span class="comment">// 是否使用tab进行缩进（默认false）</span></span><br><span class="line"><span class="string">"singleQuote"</span>: <span class="literal">true</span>, <span class="comment">// 使用单引号（默认false）</span></span><br><span class="line"><span class="string">"semi"</span>: <span class="literal">true</span>, <span class="comment">// 声明结尾使用分号(默认true)</span></span><br><span class="line"><span class="string">"trailingComma"</span>: <span class="string">"all"</span>, <span class="comment">// 多行使用拖尾逗号（默认none）</span></span><br><span class="line"><span class="string">"bracketSpacing"</span>: <span class="literal">true</span>, <span class="comment">// 对象字面量的大括号间使用空格（默认true）</span></span><br><span class="line"><span class="string">"jsxBracketSameLine"</span>: <span class="literal">false</span>, <span class="comment">// 多行JSX中的&gt;放置在最后一行的结尾，而不是另起一行（默认false）</span></span><br><span class="line"><span class="string">"arrowParens"</span>: <span class="string">"avoid"</span> <span class="comment">// 只有一个参数的箭头函数的参数是否带圆括号（默认avoid）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>prettier有3种使用方式：</p>
<ul>
<li><p>在编辑器中安装插件，如vs code中安装 Prettier - Code formatter；</p>
</li>
<li><p>使用脚本，使用了根目录配置文件的，使用命令行 <code>prettier --write {src,static}/**/*.{js,vue}</code> 格式化，prettier不但需要在项目里安装，还需要全局安装才能使用prettier命令，否则无效；</p>
</li>
<li><p>作为linter工具的插件使用（<code>也是本方案采取的方式</code>）：</p>
<ul>
<li><p>由于需要同时使用prettier和eslint，而prettier的一些规则和eslint的一些规则可能存在冲突，所以需要将eslint的一些可能与prettier发生冲突的代码格式化规则关闭。这里使用eslint-plugin-prettier和eslint-config-prettier。</p>
</li>
<li><p>eslint-plugin-prettier可以将prettier的规则设置为eslint的规则，对不符合规则的进行提示。（与eslint-plugin-vue相同）</p>
</li>
<li><p>eslint-config-prettier可以关闭eslint可能与prettier发生冲突的代码格式化规则。官方称eslint-plugin-prettier需要与eslint-config-prettier搭配食用才能获得最佳效果。</p>
</li>
<li><p><code>npm i -D prettier eslint-plugin-prettier eslint-config-prettier</code>，在.eslintrc.js文件中添加配置：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  extends: [</span><br><span class="line">    <span class="string">'plugin:vue/recommended'</span>,</span><br><span class="line">    <span class="string">'plugin:prettier/recommended'</span></span><br><span class="line">  ]</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">"prettier/prettier"</span>: <span class="string">"error"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>配置commitlint<br><a href="https://segmentfault.com/a/1190000017790694" target="_blank" rel="noopener">传送门</a></p>
<p>还可以结合<code>commitizen</code>交互提交工具，在全局安装commitizen，就可以在任意git项目中，都运行<code>git cz</code>命令。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install commitizen cz-conventional-changelog -g</span><br><span class="line">$ echo &apos;&#123; &quot;path&quot;: &quot;cz-conventional-changelog&quot; &#125;&apos; &gt; ~/.czrc</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"husky"</span>: &#123;</span><br><span class="line">    <span class="attr">"hooks"</span>: &#123;</span><br><span class="line">      <span class="attr">"commit-msg"</span>: <span class="string">"commitlint --edit $HUSKY_GIT_PARAMS"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"commitlint"</span>: &#123;</span><br><span class="line">    <span class="attr">"extends"</span>: [</span><br><span class="line">      <span class="string">"@commitlint/config-conventional"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"rules"</span>: &#123;</span><br><span class="line">      <span class="attr">"subject-case"</span>: [<span class="number">0</span>],</span><br><span class="line">      <span class="attr">"scope-case"</span>: [<span class="number">0</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"config"</span>: &#123;</span><br><span class="line">    <span class="attr">"commitizen"</span>: &#123;</span><br><span class="line">      <span class="attr">"path"</span>: <span class="string">"cz-conventional-changelog"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"@commitlint/cli"</span>: <span class="string">"^7.1.2"</span>,</span><br><span class="line">    <span class="attr">"@commitlint/config-conventional"</span>: <span class="string">"^7.1.2"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置lint-staged</p>
<p>lint-staged的路径按照glob规则配置，先prettier格式化，再eslint检查，最后重新git add。</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"husky"</span>: &#123;</span><br><span class="line">    <span class="attr">"hooks"</span>: &#123;</span><br><span class="line">      <span class="attr">"pre-commit"</span>: <span class="string">"lint-staged"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"lint-staged"</span>: &#123;</span><br><span class="line">    <span class="attr">"&#123;src,static&#125;/**/*.&#123;js,vue&#125;"</span>: [</span><br><span class="line">      <span class="string">"prettier --write"</span>,</span><br><span class="line">      <span class="string">"eslint --fix"</span>,</span><br><span class="line">      <span class="string">"git add"</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"eslint"</span>: <span class="string">"^4.15.0"</span>,</span><br><span class="line">    <span class="attr">"husky"</span>: <span class="string">"^1.1.2"</span>,</span><br><span class="line">    <span class="attr">"lint-staged"</span>: <span class="string">"^9.5.0"</span>,</span><br><span class="line">    <span class="attr">"prettier"</span>: <span class="string">"^1.19.1"</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>stylelint</p>
<p>待完成：<a href="https://segmentfault.com/a/1190000017335221" target="_blank" rel="noopener">https://segmentfault.com/a/1190000017335221</a></p>
</li>
</ol>
<h2 id="三、-注意几个关键问题！！"><a href="#三、-注意几个关键问题！！" class="headerlink" title="三、 注意几个关键问题！！"></a>三、 注意几个关键问题！！</h2><ul>
<li><p>我们使用的方案是借用了两个插件来集成eslint与prettier：<code>eslint-config-prettier 这个是关闭eslint冲突的规则</code>，<code>eslint-plugin-prettier是在eslint运行时同步执行prettier</code>；</p>
</li>
<li><p>由于我们使用了 eslint-plugin-prettier 插件来驱动prettier的执行，执行<code>eslint --fix</code>会同时执行eslint检查和prettier格式化，因此在<code>lint-staged</code>中就不需要先执行一次 <code>prettier --write</code> 了。（<code>The rule is autofixable -- if you run eslint with the --fix flag, your code will be formatted according to prettier style.</code>）</p>
</li>
<li><p>而如果不使用上面提到的两个插件，则必须要在<code>lint-staged</code>中就分别执行 <code>prettier --write</code> 与<code>eslint --fix</code>，由于是分开来执行的，各自需要读取各自的rules，所以要特别注意两者的一致性，否则肯定会报错。</p>
</li>
<li><p>在eslintrc.js中配置prettier/prettier的具体option规则时（比如 <code>&quot;prettier/prettier&quot;: [&quot;error&quot;, {&quot;singleQuote&quot;: true, &quot;parser&quot;: &quot;flow&quot;}]</code>），这里的option中的rules的优先级比直接在 .prettierrc文件中的规则高，因此eslint驱动prettier执行格式化会以这里的规则为准，所以如果这里配置了就不用重复在.prettierrc文件中配置了。</p>
</li>
<li><p>但是 <strong>不推荐在 在eslintrc.js中配置prettier/prettier的具体option规则</strong>，因为编辑器的一些prettier扩展只能读到.prettierrc文件中的配置，而不能读到lint配置文件的prettier配置项，因此推荐的做法是<strong>在.prettierrc文件中配置prettier的规则，eslint-config-prettier插件在用eslint驱动prettier执行时也能读到，编辑器的扩展插件也能读到</strong>（<code>Note: While it is possible to pass options to Prettier via your ESLint configuration file, it is not recommended because editor extensions such as prettier-atom and prettier-vscode will read .prettierrc, but won&#39;t read settings from ESLint, which can lead to an inconsistent experience.</code>）。</p>
</li>
</ul>
<h2 id="四、-完整配置"><a href="#四、-完整配置" class="headerlink" title="四、 完整配置"></a>四、 完整配置</h2><p>package.json</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"husky"</span>: &#123;</span><br><span class="line">    <span class="attr">"hooks"</span>: &#123;</span><br><span class="line">      <span class="attr">"commit-msg"</span>: <span class="string">"commitlint -E HUSKY_GIT_PARAMS"</span>,</span><br><span class="line">      <span class="attr">"pre-commit"</span>: <span class="string">"lint-staged"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"lint-staged"</span>: &#123;</span><br><span class="line">    <span class="attr">"&#123;src,static&#125;/**/*.&#123;js,vue&#125;"</span>: [</span><br><span class="line">      // <span class="string">"prettier --write"</span>, // 由于使用插件eslint-plugin-prettier，不需要重复配置</span><br><span class="line">      <span class="string">"eslint --fix"</span>,</span><br><span class="line">      <span class="string">"git add"</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"commitlint"</span>: &#123;</span><br><span class="line">    <span class="attr">"extends"</span>: [</span><br><span class="line">      <span class="string">"@commitlint/config-conventional"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"rules"</span>: &#123;</span><br><span class="line">      <span class="attr">"subject-case"</span>: [</span><br><span class="line">        <span class="number">0</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">"scope-case"</span>: [</span><br><span class="line">        <span class="number">0</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"config"</span>: &#123;</span><br><span class="line">    <span class="attr">"commitizen"</span>: &#123;</span><br><span class="line">      <span class="attr">"path"</span>: <span class="string">"cz-conventional-changelog"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"@commitlint/cli"</span>: <span class="string">"^7.1.2"</span>,</span><br><span class="line">    <span class="attr">"@commitlint/config-conventional"</span>: <span class="string">"^7.1.2"</span>,</span><br><span class="line">    <span class="attr">"babel-eslint"</span>: <span class="string">"^8.2.6"</span>,</span><br><span class="line">    <span class="attr">"cz-conventional-changelog"</span>: <span class="string">"2.1.0"</span>,</span><br><span class="line">    <span class="attr">"eslint"</span>: <span class="string">"^4.15.0"</span>,</span><br><span class="line">    <span class="attr">"eslint-config-prettier"</span>: <span class="string">"^6.7.0"</span>,</span><br><span class="line">    <span class="attr">"eslint-plugin-prettier"</span>: <span class="string">"^3.1.1"</span>,</span><br><span class="line">    <span class="attr">"eslint-plugin-vue"</span>: <span class="string">"^4.0.0"</span>,</span><br><span class="line">    <span class="attr">"husky"</span>: <span class="string">"^1.1.2"</span>,</span><br><span class="line">    <span class="attr">"lint-staged"</span>: <span class="string">"^9.5.0"</span>,</span><br><span class="line">    <span class="attr">"prettier"</span>: <span class="string">"^1.19.1"</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>.prettierrc.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="string">"printWidth"</span>: <span class="number">120</span>, <span class="comment">// 每行代码长度（默认80）</span></span><br><span class="line">  <span class="string">"tabWidth"</span>: <span class="number">2</span>, <span class="comment">// 每个tab相当于多少个空格（默认2）</span></span><br><span class="line">  <span class="string">"useTabs"</span>: <span class="literal">false</span>, <span class="comment">// 是否使用tab进行缩进（默认false）</span></span><br><span class="line">  <span class="string">"singleQuote"</span>: <span class="literal">true</span>, <span class="comment">// 使用单引号（默认false）</span></span><br><span class="line">  <span class="string">"semi"</span>: <span class="literal">false</span>, <span class="comment">// 声明结尾使用分号(默认true)</span></span><br><span class="line">  <span class="string">"trailingComma"</span>: <span class="string">"none"</span>, <span class="comment">// 多行使用拖尾逗号（默认none）</span></span><br><span class="line">  <span class="string">"bracketSpacing"</span>: <span class="literal">true</span>, <span class="comment">// 对象字面量的大括号间使用空格（默认true）</span></span><br><span class="line">  <span class="string">"jsxBracketSameLine"</span>: <span class="literal">true</span>, <span class="comment">// 多行JSX中的&gt;放置在最后一行的结尾，而不是另起一行（默认false）</span></span><br><span class="line">  <span class="string">"arrowParens"</span>: <span class="string">"avoid"</span>, <span class="comment">// 只有一个参数的箭头函数的参数是否带圆括号（默认avoid）</span></span><br><span class="line">  <span class="string">"proseWrap"</span>: <span class="string">"preserve"</span>,</span><br><span class="line">  <span class="string">"endOfLine"</span>: <span class="string">"crlf"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>eslintrc.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  root: <span class="literal">true</span>,</span><br><span class="line">  parser: <span class="string">'vue-eslint-parser'</span>, <span class="comment">// 详见https://eslint.vuejs.org/user-guide/#faq</span></span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    parser: <span class="string">'babel-eslint'</span>,</span><br><span class="line">    sourceType: <span class="string">'module'</span>,</span><br><span class="line">    ecmaFeatures: &#123;</span><br><span class="line">      jsx: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  env: &#123;</span><br><span class="line">    es6: <span class="literal">true</span>,</span><br><span class="line">    browser: <span class="literal">true</span>,</span><br><span class="line">    node: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  extends: [</span><br><span class="line">    <span class="string">'eslint:recommended'</span>,</span><br><span class="line">    <span class="string">'plugin:vue/recommended'</span>,</span><br><span class="line">    <span class="string">'plugin:prettier/recommended'</span>,</span><br><span class="line">  ],</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="string">'vue'</span>,</span><br><span class="line">    <span class="string">'prettier'</span></span><br><span class="line">  ],</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">"prettier/prettier"</span>: <span class="string">"error"</span>,</span><br><span class="line">    <span class="string">'vue/max-attributes-per-line'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'singleline'</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="string">'multiline'</span>: &#123;</span><br><span class="line">        <span class="string">'max'</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">'allowFirstLine'</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'vue/singleline-html-element-content-newline'</span>: <span class="string">'off'</span>,</span><br><span class="line">    <span class="string">"vue/multiline-html-element-content-newline"</span>: <span class="string">'off'</span>,</span><br><span class="line">    <span class="string">'vue/html-end-tags'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'vue/name-property-casing'</span>: [<span class="string">'error'</span>, <span class="string">'PascalCase'</span>],</span><br><span class="line">    <span class="string">'vue/no-v-html'</span>: <span class="string">'off'</span>,</span><br><span class="line">    <span class="string">"vue/html-closing-bracket-newline"</span>: [<span class="number">0</span>, &#123;</span><br><span class="line">      <span class="string">"singleline"</span>: <span class="string">"never"</span>,</span><br><span class="line">      <span class="string">"multiline"</span>: <span class="string">"never"</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">"vue/html-closing-bracket-newline"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">"vue/html-self-closing"</span>: [<span class="string">"error"</span>, &#123;</span><br><span class="line">      <span class="string">"html"</span>: &#123;</span><br><span class="line">        <span class="string">"void"</span>: <span class="string">"any"</span>,</span><br><span class="line">        <span class="string">"normal"</span>: <span class="string">"always"</span>,</span><br><span class="line">        <span class="string">"component"</span>: <span class="string">"always"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"svg"</span>: <span class="string">"always"</span>,</span><br><span class="line">      <span class="string">"math"</span>: <span class="string">"always"</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">"vue/require-default-prop"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">"vue/order-in-components"</span>: [<span class="number">0</span>, &#123;</span><br><span class="line">      <span class="string">"order"</span>: [</span><br><span class="line">        <span class="string">"el"</span>,</span><br><span class="line">        <span class="string">"name"</span>,</span><br><span class="line">        <span class="string">"parent"</span>,</span><br><span class="line">        <span class="string">"functional"</span>,</span><br><span class="line">        [<span class="string">"delimiters"</span>, <span class="string">"comments"</span>],</span><br><span class="line">        <span class="string">"extends"</span>,</span><br><span class="line">        <span class="string">"mixins"</span>,</span><br><span class="line">        <span class="string">"inheritAttrs"</span>,</span><br><span class="line">        <span class="string">"model"</span>,</span><br><span class="line">        [<span class="string">"props"</span>, <span class="string">"propsData"</span>],</span><br><span class="line">        <span class="string">"fetch"</span>,</span><br><span class="line">        <span class="string">"asyncData"</span>,</span><br><span class="line">        <span class="string">"data"</span>,</span><br><span class="line">        <span class="string">"computed"</span>,</span><br><span class="line">        <span class="string">"watch"</span>,</span><br><span class="line">        [<span class="string">"directives"</span>, <span class="string">"filters"</span>],</span><br><span class="line">        <span class="string">"LIFECYCLE_HOOKS"</span>,</span><br><span class="line">        <span class="string">"methods"</span>,</span><br><span class="line">        <span class="string">"head"</span>,</span><br><span class="line">        [<span class="string">"template"</span>, <span class="string">"render"</span>],</span><br><span class="line">        <span class="string">"renderError"</span>,</span><br><span class="line">        <span class="string">"components"</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'accessor-pairs'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'arrow-spacing'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'before'</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">'after'</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'block-spacing'</span>: [<span class="number">2</span>, <span class="string">'always'</span>],</span><br><span class="line">    <span class="string">'brace-style'</span>: [<span class="number">2</span>, <span class="string">'1tbs'</span>, &#123;</span><br><span class="line">      <span class="string">'allowSingleLine'</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'camelcase'</span>: [<span class="number">0</span>, &#123;</span><br><span class="line">      <span class="string">'properties'</span>: <span class="string">'always'</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'comma-dangle'</span>: [<span class="number">2</span>, <span class="string">'never'</span>],</span><br><span class="line">    <span class="string">'comma-spacing'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'before'</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">'after'</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'comma-style'</span>: [<span class="number">2</span>, <span class="string">'last'</span>],</span><br><span class="line">    <span class="string">'constructor-super'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'curly'</span>: [<span class="number">2</span>, <span class="string">'multi-line'</span>],</span><br><span class="line">    <span class="string">'dot-location'</span>: [<span class="number">2</span>, <span class="string">'property'</span>],</span><br><span class="line">    <span class="string">'eol-last'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'eqeqeq'</span>: [<span class="string">'error'</span>, <span class="string">'always'</span>, &#123;<span class="string">'null'</span>: <span class="string">'ignore'</span>&#125;],</span><br><span class="line">    <span class="string">'generator-star-spacing'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'before'</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">'after'</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'handle-callback-err'</span>: [<span class="number">2</span>, <span class="string">'^(err|error)$'</span>],</span><br><span class="line">    <span class="string">'jsx-quotes'</span>: [<span class="number">2</span>, <span class="string">'prefer-single'</span>],</span><br><span class="line">    <span class="string">'key-spacing'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'beforeColon'</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">'afterColon'</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'keyword-spacing'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'before'</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">'after'</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'new-cap'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'newIsCap'</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">'capIsNew'</span>: <span class="literal">false</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'new-parens'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-array-constructor'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-caller'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-console'</span>: <span class="string">'off'</span>,</span><br><span class="line">    <span class="string">'no-class-assign'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-cond-assign'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-const-assign'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-control-regex'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">'no-delete-var'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-dupe-args'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-dupe-class-members'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-dupe-keys'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-duplicate-case'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-empty-character-class'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-empty-pattern'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-eval'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-ex-assign'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-extend-native'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-extra-bind'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-extra-boolean-cast'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-extra-parens'</span>: [<span class="number">2</span>, <span class="string">'functions'</span>],</span><br><span class="line">    <span class="string">'no-fallthrough'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-floating-decimal'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-func-assign'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-implied-eval'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-inner-declarations'</span>: [<span class="number">2</span>, <span class="string">'functions'</span>],</span><br><span class="line">    <span class="string">'no-invalid-regexp'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-irregular-whitespace'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-iterator'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-label-var'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-labels'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'allowLoop'</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">'allowSwitch'</span>: <span class="literal">false</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'no-lone-blocks'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-mixed-spaces-and-tabs'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-multi-spaces'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-multi-str'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-multiple-empty-lines'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'max'</span>: <span class="number">1</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'no-native-reassign'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-negated-in-lhs'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-new-object'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-new-require'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-new-symbol'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-new-wrappers'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-obj-calls'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-octal'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-octal-escape'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-path-concat'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-proto'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-redeclare'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-regex-spaces'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-return-assign'</span>: [<span class="number">2</span>, <span class="string">'except-parens'</span>],</span><br><span class="line">    <span class="string">'no-self-assign'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-self-compare'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-sequences'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-shadow-restricted-names'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-spaced-func'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-sparse-arrays'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-this-before-super'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-throw-literal'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-trailing-spaces'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-undef'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-undef-init'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-unexpected-multiline'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-unmodified-loop-condition'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-unneeded-ternary'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'defaultAssignment'</span>: <span class="literal">false</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'no-unreachable'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-unsafe-finally'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-unused-vars'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'vars'</span>: <span class="string">'all'</span>,</span><br><span class="line">      <span class="string">'args'</span>: <span class="string">'none'</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'no-useless-call'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-useless-computed-key'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-useless-constructor'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-useless-escape'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">'no-whitespace-before-property'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-with'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'one-var'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'initialized'</span>: <span class="string">'never'</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'operator-linebreak'</span>: [<span class="number">2</span>, <span class="string">'after'</span>, &#123;</span><br><span class="line">      <span class="string">'overrides'</span>: &#123;</span><br><span class="line">        <span class="string">'?'</span>: <span class="string">'before'</span>,</span><br><span class="line">        <span class="string">':'</span>: <span class="string">'before'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'padded-blocks'</span>: [<span class="number">2</span>, <span class="string">'never'</span>],</span><br><span class="line">    <span class="string">'quotes'</span>: [<span class="number">2</span>, <span class="string">'single'</span>, &#123;</span><br><span class="line">      <span class="string">'avoidEscape'</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">'allowTemplateLiterals'</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="comment">// 'indent': [2, 2, &#123;</span></span><br><span class="line">    <span class="comment">//   'SwitchCase': 1</span></span><br><span class="line">    <span class="comment">// &#125;],</span></span><br><span class="line">    <span class="comment">// 'semi': [2, 'never'],</span></span><br><span class="line">    indent: <span class="number">0</span>, <span class="comment">// process by prettier</span></span><br><span class="line">    semi: <span class="number">0</span>, <span class="comment">// process by prettier</span></span><br><span class="line">    <span class="string">'semi-spacing'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'before'</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">'after'</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'space-before-blocks'</span>: [<span class="number">2</span>, <span class="string">'always'</span>],</span><br><span class="line">    <span class="string">'space-before-function-paren'</span>: [<span class="number">2</span>, <span class="string">'never'</span>],</span><br><span class="line">    <span class="string">'space-in-parens'</span>: [<span class="number">2</span>, <span class="string">'never'</span>],</span><br><span class="line">    <span class="string">'space-infix-ops'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'space-unary-ops'</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">'words'</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">'nonwords'</span>: <span class="literal">false</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'spaced-comment'</span>: [<span class="number">2</span>, <span class="string">'always'</span>, &#123;</span><br><span class="line">      <span class="string">'markers'</span>: [<span class="string">'global'</span>, <span class="string">'globals'</span>, <span class="string">'eslint'</span>, <span class="string">'eslint-disable'</span>, <span class="string">'*package'</span>, <span class="string">'!'</span>, <span class="string">','</span>]</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">'template-curly-spacing'</span>: [<span class="number">2</span>, <span class="string">'never'</span>],</span><br><span class="line">    <span class="string">'use-isnan'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'valid-typeof'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'wrap-iife'</span>: [<span class="number">2</span>, <span class="string">'any'</span>],</span><br><span class="line">    <span class="string">'yield-star-spacing'</span>: [<span class="number">2</span>, <span class="string">'both'</span>],</span><br><span class="line">    <span class="string">'yoda'</span>: [<span class="number">2</span>, <span class="string">'never'</span>],</span><br><span class="line">    <span class="string">'prefer-const'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'no-debugger'</span>: process.env.NODE_ENV === <span class="string">'production'</span> ? <span class="number">2</span> : <span class="number">0</span>,</span><br><span class="line">    <span class="string">'object-curly-spacing'</span>: [<span class="number">2</span>, <span class="string">'always'</span>],</span><br><span class="line">    <span class="string">'array-bracket-spacing'</span>: [<span class="number">2</span>, <span class="string">'never'</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>.eslintignore</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/build/</span><br><span class="line">/config/</span><br><span class="line">/dist/</span><br><span class="line">/*.js</span><br></pre></td></tr></table></figure>

</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Johninch</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://johninch.github.io/2019/12/12/eslintPrettier/">https://johninch.github.io/2019/12/12/eslintPrettier/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://johninch.github.io">JohninchのBlog</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/代码检查/">代码检查</a><a class="post-meta__tags" href="/tags/团队成长/">团队成长</a><a class="post-meta__tags" href="/tags/eslint/">eslint</a><a class="post-meta__tags" href="/tags/prettier/">prettier</a><a class="post-meta__tags" href="/tags/husky/">husky</a></div><div class="social-share" data-disabled="google,facebook"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/12/18/linkedList/"><i class="fa fa-chevron-left">  </i><span>linkedList</span></a></div><div class="next-post pull-right"><a href="/2019/11/22/variablesAndTypes5/"><span>JS专题-变量与类型-（5）JS的类型判断方法</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '96a2af06b5748b4ede1e',
  clientSecret: '4e684cb9e506bdd7f5732db53d3f99da0315afbb',
  repo: 'johninch.github.io',
  owner: 'johninch',
  admin: 'johninch',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2019 By Johninch</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.3"></script><script src="/js/fancybox.js?version=1.6.3"></script><script src="/js/sidebar.js?version=1.6.3"></script><script src="/js/copy.js?version=1.6.3"></script><script src="/js/fireworks.js?version=1.6.3"></script><script src="/js/transition.js?version=1.6.3"></script><script src="/js/scroll.js?version=1.6.3"></script><script src="/js/head.js?version=1.6.3"></script><script src="/js/search/algolia.js"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":200,"height":400},"mobile":{"show":true},"react":{"opacity":0.7,"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body></html>